<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue and SVG.js Square Example with Hover Menu</title>
    <style>
      .dropdown-menu {
        display: none;
        padding: 10px;
        border: 1px solid #ccc;
        background-color: #f9f9f9;
        position: absolute;
        z-index: 1;
      }
      .dropdown-menu div {
        margin: 5px;
        padding: 5px;
      }
      .dropdown-menu.active {
        display: block;
      }
      button {
        border: 0px solid #ccc;
        background-color: white;
        font-size: 3mm;
        height: 3mm;
        margin: 0;
        padding: 0;
      }
      div {
        margin: 0;
        padding: 0;
      }
      input {
        width: 200px;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div @mouseenter="showDropdown = true" @mouseleave="showDropdown = false">
        <button>change</button>
        <div :class="['dropdown-menu', { active: showDropdown }]">
          <div>
            <span>
              <label>Розробив: </label>
              <input type="text" v-model="developer" />
            </span>
            <span>
              <label> Перевірив:</label>
              <input type="text" v-model="inspector" />
            </span>
          </div>
          <div>
            <span>
              <label>Шифр: </label>
              <input type="text" v-model="cipher" />
            </span>
            <span>
              <label>Адреса:</label>
              <input type="text" v-model="address" />
            </span>
          </div>
          <div>
            <span>
              <label>Назва: </label>
              <input type="text" v-model="name" />
            </span>
            <span>
              <label>Матеріал:</label>
              <input type="text" v-model="material" />
            </span>
          </div>
          <div>
            <span>
              <label>кількість</label>
              <input type="number" v-model="count" />
            </span>
            <span>
              <label>товщина</label>
              <input type="number" v-model="thickness" />
            </span>
          </div>
          <div>
            <p>горизонтальні</p>
            <div>
              <span>
                <label>ширина</label>
                <input type="number" v-model="Width" />
              </span>
            </div>
            <div>
              <span>
                <label>відступ сліва</label>
                <input type="number" v-model="left" />
                <span>
                  <label>відступ справа</label>
                  <input type="number" v-model="right" />
                </span>
              </span>
            </div>
            <div>
              <p>вертикальні</p>
              <div>
                <span>
                  <label>висота</label>
                  <input type="number" v-model="height" />
                </span>
              </div>
              <div>
                <span>
                  <label>відступ згори</label>
                  <input type="number" v-model="up" />
                  <span>
                    <label>відступ знизу</label>
                    <input type="number" v-model="down" />
                  </span>
                </span>
              </div>
            </div>
            <div>
              <span>
                <label>диаметр</label>
                <input type="number" v-model="diametr" />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div id="svgContainer"></div>
    </div>

    <!-- Include Vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Include SVG.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.2/svg.min.js"></script>

    <script src="./Base2.js"></script>
    <script src="./param2.js"></script>
    <script>
      const { createApp, ref, onMounted, watch } = Vue;

      createApp({
        setup() {
          const developer = ref("Блінштейн");
          const inspector = ref("Кронштейн");
          const cipher = ref("23-07-0387КА");
          const address = ref("Большая арнаутская 87");
          const name = ref("H1");
          const material = ref("AISI201");
          const Width = ref(60);
          const left = ref(10);
          const right = ref(20);
          const height = ref(70);
          const up = ref(12);
          const down = ref(16);
          const diametr = ref(5);
          const thickness = ref(2);
          const count = ref(2);

          const squareWidth = ref(50);
          //   const squareHeight = ref(100);
          const showDropdown = ref(false);
          let draw = null;

          function initializeDraw() {
            tableKMD = new Array();
            if (draw) {
              draw.clear(); // Remove all elements and clear the container
              draw.remove(); // Remove the draw instance
            }
            // Create a new draw instance
            draw = SVG().addTo("#svgContainer").size("292mm", "292mm");
            let b = new Base(draw);
            plate(
              draw,
              b,
              developer.value,
              inspector.value,
              cipher.value,
              address.value,
              name.value,
              material.value,
              Width.value,
              left.value,
              right.value,
              height.value,
              up.value,
              down.value,
              diametr.value,
              thickness.value,
              count.value
            );
          }

          onMounted(() => {
            initializeDraw();
          });

          watch(
            [
              developer,
              inspector,
              cipher,
              address,
              name,
              material,
              Width,
              left,
              right,
              height,
              up,
              down,
              diametr,
              thickness,
              count,
            ],
            () => {
              initializeDraw();
            }
          );

          return {
            developer,
            inspector,
            cipher,
            address,
            name,
            material,
            Width,
            left,
            right,
            height,
            up,
            down,
            diametr,
            thickness,
            count,
            showDropdown,
          };
        },
      }).mount("#app");
    </script>
  </body>
</html>
